<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>構件使用確認</title>
    <link rel="stylesheet" href="styles.css" />

    <style>
        body { padding: 20px; }

        .header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .header-title {
            font-size: 24px;
            font-weight: bold;
            color: #fff;
        }
        .back-btn {
            padding: 10px 20px;
            background: #2f3340;
            color: #fff;
            border-radius: 12px;
            cursor: pointer;
        }

        .input-box {
            width: 100%;
            padding: 14px;
            border-radius: 12px;
            background: #2a2b31;
            border: none;
            color: #fff;
            margin-bottom: 14px;
        }

        .primary-btn {
            width: 100%;
            padding: 14px;
            background: #3d7bff;
            border-radius: 14px;
            color: #fff;
            text-align: center;
            font-size: 16px;
            margin-bottom: 20px;
            cursor: pointer;
        }

        .record-card {
            background: #2a2b31;
            padding: 14px;
            border-radius: 14px;
            color: #fff;
            margin-bottom: 14px;
        }
        .record-title {
            font-size: 18px;
            font-weight: bold;
        }
        .record-time {
            font-size: 14px;
            color: #bbb;
            margin-bottom: 12px;
        }

        .row {
            display: flex;
            gap: 10px;
            justify-content: space-between;
        }

        .location-select {
            flex: 1;
            padding: 12px;
            background: #33353d;
            color: #fff;
            border-radius: 12px;
            border: none;
        }

        .btn-del {
            background: #d9534f;
            padding: 12px 18px;
            border-radius: 12px;
            color: #fff;
            cursor: pointer;
        }

        .btn-used {
            background: #3d7bff;
            padding: 12px 18px;
            border-radius: 12px;
            color: #fff;
            cursor: pointer;
        }

        .hint {
            color: #bbb;
            margin-bottom: 10px;
        }
    </style>
</head>

<body>

    <div class="header-row">
        <div class="header-title">構件使用確認</div>
        <div class="back-btn" onclick="location.href='index.html'">返回主畫面</div>
    </div>

    <input id="itemId" class="input-box" placeholder="構件編號，例如 A-001" />

    <div class="primary-btn" onclick="addRecord()">新增紀錄</div>

    <div class="hint">今日使用紀錄</div>

    <div id="recordList"></div>

    <script>
        let todayRecords = [];

        renderList();

        function addRecord() {
            const id = document.getElementById("itemId").value.trim();
            if (!id) {
                alert("請輸入構件編號");
                return;
            }

            todayRecords.push({
                id,
                time: new Date().toLocaleString("zh-TW"),
                location: "",
                used: false
            });

            document.getElementById("itemId").value = "";
            renderList();
        }

        function renderList() {
            const list = document.getElementById("recordList");
            list.innerHTML = "";

            todayRecords.forEach((rec, index) => {
                const card = document.createElement("div");
                card.className = "record-card";

                card.innerHTML = `
                    <div class="record-title">${rec.id}</div>
                    <div class="record-time">${rec.time}</div>

                    <div class="row">
                        <select class="location-select" onchange="setLocation(${index}, this.value)">
                            <option value="">選擇位置</option>
                            <option>32-33/F</option>
                            <option>32-33/G</option>
                            <option>32-33/H</option>
                        </select>

                        <div class="btn-del" onclick="deleteRecord(${index})">刪除</div>
                        <div class="btn-used" onclick="markUsed(${index})">
                            ${rec.used ? "已使用" : "標記使用"}
                        </div>
                    </div>
                `;

                list.appendChild(card);
            });
        }

        function setLocation(i, v) {
            todayRecords[i].location = v;
        }

        function deleteRecord(i) {
            if (!confirm("確定刪除此紀錄？")) return;
            todayRecords.splice(i, 1);
            renderList();
        }

        function markUsed(i) {
            todayRecords[i].used = true;
            alert(todayRecords[i].id + " 已標記為已使用");
            renderList();
        }
    </script>

</body>
</html>
